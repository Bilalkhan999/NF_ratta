{% extends "base.html" %}

{% block content %}
  <div class="d-flex align-items-center justify-content-between mb-3">
    <div>
      <h3 class="mb-0">Sync Employees from Transactions</h3>
      <div class="text-muted">Oneâ€‘time sync completed</div>
    </div>
    <a class="btn btn-outline-secondary" href="/employees">Employees</a>
  </div>

  <div class="card">
    <div class="card-body">
      {% if debug_rows %}
        <h6 class="mb-3">Debug: Distinct Transaction Names & Categories</h6>
        <pre class="bg-light p-2 rounded mb-4" style="font-size:0.875rem;">{{ debug_rows }}</pre>
      {% endif %}
      {% if errors %}
        <h6 class="mb-3 text-danger">Errors</h6>
        <ul class="mb-4">
          {% for e in errors %}
            <li>{{ e }}</li>
          {% endfor %}
        </ul>
      {% endif %}
      {% if created %}
        <h6 class="mb-3">Employees Created</h6>
        <ul class="mb-4">
          {% for name in created %}
            <li>{{ name }}</li>
          {% endfor %}
        </ul>
      {% else %}
        <p class="mb-4 text-muted">No new employees were created.</p>
      {% endif %}
      <h6 class="mb-3">Transactions Linked</h6>
      <p class="mb-0"><strong>{{ linked }}</strong> transactions were linked to employees.</p>
    </div>
  </div>
{% endblock %}
